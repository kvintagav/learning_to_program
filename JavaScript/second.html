<html>
	<head>
		<meta charset="utf-8">
		<title>Factorials</title>
		<style >
			.result {font-weight: bold;} 
			#payment {text-decoration: underline;}
		</style>
	</head>
	<body>
		<h2>Вычисление Ссуды</h2>
		<form name = "loandata">
			<table>
				<tr><td><b>Введите даные о ссуде</b></td></tr>
				<tr>
					<td> Размер ссуды:</td>
					<td><input type = "text" name = "principal" onchange="calculate();"></td>
				</tr>
				<tr>
					<td> Годовой процент:</td>
					<td><input type = "text" name = "interest" onchange="calculate();"></td>
				</tr>
				<tr>
					<td> Срок ссуды в годах:</td>
					<td><input type = "text" name = "years" onchange="calculate();"></td>
				</tr>
				<tr><td></td>
					<td><input type="button" value ="Рассчитать" onclick = "calculate();"></td>
				</tr>
				<tr><td><b>Сведения о платеже:</b></td></tr>
				<tr>
					<td> Ежемесячный платеж:</td>
					<td>$<span class="result" id="payment"></span></td>
				</tr>
				<tr>
					<td> Общая сумма платежей:</td>
					<td>$<span class="result" id="total"></span></td>
				</tr>
				<tr>
					<td> Общая сумма платежей по процентам:</td>
					<td>$<span class="result" id="totalinterest"></span></td>
				</tr>
			</table>
		</form>
		<script language="JavaScript">
		function calculate() {
			var principal = document.loandata.principal.value;
			var interest = document.loandata.interest.value/100/12;
			var payments = document.loandata.years.value*12;

			var x = Math.pow(1 + interest, payments);
			var monthly = (principal*x*interest)/(x-1);
		
			var payment = document.getElementById("payment");
			var total = document.getElementById("total");
			var totalinterest = document.getElementById("totalinterest");

			if (isFinite(monthly)){
				payment.innerHTML = monthly.toFixed(2);
				total.innerHTML = (monthly*payments).toFixed(2);
				totalinterest.innerHTML = ((monthly*payments)-principal).toFixed(2);
			}
			else{
				payment.innerHTML = "";
				total.innerHTML = "";
				totalinterest.innerHTML = "";

			}
			}
		</script>
	</body>
</html>